# ğŸ–¥ï¸ WoL LINE Bot

<p align="center">
  <img src="https://cdn-icons-png.flaticon.com/512/2933/2933245.png" width="120" alt="WoL Bot Icon">
</p>

<p align="center">
  <b>LINE Bot à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸±à¹ˆà¸‡à¹€à¸›à¸´à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸­à¸¡à¸à¸´à¸§à¹€à¸•à¸­à¸£à¹Œà¸£à¸°à¸¢à¸°à¹„à¸à¸¥à¸œà¹ˆà¸²à¸™ Wake-on-LAN (WoL)</b>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Node.js-18+-green?logo=node.js" alt="Node.js">
  <img src="https://img.shields.io/badge/Docker-Ready-blue?logo=docker" alt="Docker">
  <img src="https://img.shields.io/badge/LINE-Messaging%20API-00C300?logo=line" alt="LINE">
  <img src="https://img.shields.io/badge/License-ISC-yellow" alt="License">
</p>

---

## âœ¨ Features

| Feature | Description |
|---------|-------------|
| âš¡ **Power On** | à¸ªà¸±à¹ˆà¸‡à¹€à¸›à¸´à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸œà¹ˆà¸²à¸™ Wake-on-LAN |
| ğŸ“Š **Status Check** | à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ (Online/Offline) à¸”à¹‰à¸§à¸¢ Ping |
| ğŸ“ **Register MAC** | à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ MAC Address à¸‚à¸­à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸›à¸´à¸” |
| ğŸŒ **Register IP** | à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ IP Address à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸° |
| â“ **Help** | à¹à¸ªà¸”à¸‡à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸¥à¸°à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” |
| ğŸ‘¥ **Multi-User** | à¸£à¸­à¸‡à¸£à¸±à¸šà¸«à¸¥à¸²à¸¢ user à¹à¸¢à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸±à¸™ |

---

## ğŸ“‹ Commands

| Command | Description | Example |
|---------|-------------|---------|
| `#MAC` | à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ MAC Address | `#00:11:22:33:44:55` |
| `@IP` | à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ IP Address | `@192.168.1.100` |
| `poweron` | à¸ªà¸±à¹ˆà¸‡à¹€à¸›à¸´à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ | - |
| `status` | à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ | - |
| `help` à¸«à¸£à¸·à¸­ `?` | à¹à¸ªà¸”à¸‡à¸§à¸´à¸˜à¸µà¹ƒà¸Šà¹‰à¸‡à¸²à¸™ | - |

---

## ğŸ“¸ Screenshots

<details>
<summary>à¸”à¸¹à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™</summary>

### à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ MAC Address
```
User: #b4:2e:99:1c:e0:f6
Bot:  âœ… à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ MAC à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

### à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ IP Address
```
User: @192.168.1.33
Bot:  âœ… à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ IP à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

### à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°
```
User: status
Bot:  ğŸ“Š à¸ªà¸–à¸²à¸™à¸°à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡
      MAC: b4:2e:99:1c:e0:f6
      IP: 192.168.1.33
      Status: ğŸŸ¢ à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ
      Ping: 1.2ms
```

### à¸ªà¸±à¹ˆà¸‡à¹€à¸›à¸´à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡
```
User: poweron
Bot:  âœ… à¸ªà¸±à¹ˆà¸‡à¹€à¸›à¸´à¸”à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡: à¸ªà¸³à¹€à¸£à¹‡à¸ˆ
```

</details>

---

## ğŸš€ Quick Start

### ğŸ“‹ Prerequisites

- [Node.js](https://nodejs.org/) 18+ à¸«à¸£à¸·à¸­ [Docker](https://www.docker.com/)
- [LINE Messaging API Channel](https://developers.line.biz/console/)
- SSL Certificate (à¸ªà¸³à¸«à¸£à¸±à¸š LINE Webhook)
- à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸„à¸­à¸¡à¸à¸´à¸§à¹€à¸•à¸­à¸£à¹Œà¸—à¸µà¹ˆà¸£à¸­à¸‡à¸£à¸±à¸š Wake-on-LAN

### 1ï¸âƒ£ Clone Repository

```bash
git clone https://github.com/pechpijit/wol-line-bot.git
cd wol-line-bot
```

### 2ï¸âƒ£ Setup Environment

```bash
cp .env.example .env
cp data.json.example data.json
```

à¹à¸à¹‰à¹„à¸‚à¹„à¸Ÿà¸¥à¹Œ `.env`:
```env
PORT=3000
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token
LINE_CHANNEL_SECRET=your_channel_secret
```

### 3ï¸âƒ£ Setup SSL Certificates

à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ `cer/` à¹à¸¥à¸°à¹ƒà¸ªà¹ˆà¹„à¸Ÿà¸¥à¹Œ certificate:
```
cer/
â”œâ”€â”€ your_domain.crt      # SSL Certificate
â”œâ”€â”€ your_domain.key      # Private Key
â””â”€â”€ ca.crt               # CA Certificate (à¸–à¹‰à¸²à¸¡à¸µ)
```

> ğŸ’¡ à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸Šà¹‰ [Let's Encrypt](https://letsencrypt.org/) à¸ªà¸³à¸«à¸£à¸±à¸š SSL à¸Ÿà¸£à¸µ

### 4ï¸âƒ£ Run with Docker (à¹à¸™à¸°à¸™à¸³)

```bash
docker-compose up -d --build
```

> âš ï¸ **à¸ªà¸³à¸„à¸±à¸:** à¹ƒà¸Šà¹‰ `network_mode: host` à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰ WoL à¹à¸¥à¸° Ping à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰à¹ƒà¸™ LAN

### 5ï¸âƒ£ Run Locally (Alternative)

```bash
npm install
npm start
```

### 6ï¸âƒ£ Setup LINE Webhook

1. à¹„à¸›à¸—à¸µà¹ˆ [LINE Developers Console](https://developers.line.biz/console/)
2. à¹€à¸¥à¸·à¸­à¸ Channel à¸‚à¸­à¸‡à¸„à¸¸à¸“
3. à¸•à¸±à¹‰à¸‡ Webhook URL: `https://your-domain.com/webhook`
4. à¹€à¸›à¸´à¸” "Use webhook"

---

## ğŸ“ Project Structure

```
wol-line-bot/
â”œâ”€â”€ ğŸ“„ index.js           # Main server & bot logic
â”œâ”€â”€ ğŸ“„ data.json          # User data storage
â”œâ”€â”€ ğŸ“„ package.json       # Dependencies
â”œâ”€â”€ ğŸ“„ docker-compose.yml # Docker configuration
â”œâ”€â”€ ğŸ“„ Dockerfile         # Docker build instructions
â”œâ”€â”€ ğŸ“„ .env.example       # Environment template
â”œâ”€â”€ ğŸ“„ .env               # Environment variables (gitignored)
â”œâ”€â”€ ğŸ“„ .gitignore         # Git ignore rules
â”œâ”€â”€ ğŸ“„ .dockerignore      # Docker ignore rules
â”œâ”€â”€ ğŸ“ cer/               # SSL certificates (gitignored)
â””â”€â”€ ğŸ“ images/            # Static images
```

---

## âš™ï¸ Configuration

### Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `PORT` | Server port (default: 3000) | âœ… |
| `LINE_CHANNEL_ACCESS_TOKEN` | LINE Bot access token | âœ… |
| `LINE_CHANNEL_SECRET` | LINE Bot channel secret | âœ… |

### Docker Compose

```yaml
services:
  wol-bot:
    build: .
    network_mode: host  # à¸ªà¸³à¸„à¸±à¸à¸ªà¸³à¸«à¸£à¸±à¸š WoL à¹à¸¥à¸° Ping
    env_file:
      - .env
    volumes:
      - ./data.json:/app/data.json
      - ./cer:/app/cer:ro
```

---

## ğŸ”§ Wake-on-LAN Setup

### à¹€à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ WoL à¸šà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢

1. **BIOS/UEFI:** à¹€à¸›à¸´à¸” "Wake on LAN" à¸«à¸£à¸·à¸­ "Power On by PCI-E"
2. **Windows:**
   - Device Manager â†’ Network Adapter â†’ Properties
   - Power Management â†’ âœ… Allow this device to wake the computer
   - Advanced â†’ Wake on Magic Packet â†’ Enabled

### à¹€à¸›à¸´à¸” Ping à¸šà¸™ Windows 11

Windows 11 à¸›à¸´à¸” ICMP ping à¹‚à¸”à¸¢ default à¸£à¸±à¸™à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸™à¸µà¹‰à¹ƒà¸™ **Command Prompt (Admin)**:

```cmd
netsh advfirewall firewall add rule name="Allow ICMPv4" protocol=icmpv4:8,any dir=in action=allow
```

### à¸«à¸² MAC Address

**Windows:**
```cmd
ipconfig /all
```

**macOS/Linux:**
```bash
ifconfig
# à¸«à¸£à¸·à¸­
ip link show
```

---

## ğŸ³ Docker Commands

```bash
# Build à¹à¸¥à¸° Run
docker-compose up -d --build

# à¸”à¸¹ Logs
docker-compose logs -f

# Rebuild à¹ƒà¸«à¸¡à¹ˆà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ cache)
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# à¸«à¸¢à¸¸à¸” Container
docker-compose down
```

---

## ğŸ“ Data Storage

à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ user à¸–à¸¹à¸à¹€à¸à¹‡à¸šà¹ƒà¸™ `data.json`:

```json
[
  {
    "userId": "U1234567890abcdef...",
    "MAC": "00:11:22:33:44:55",
    "IP": "192.168.1.100",
    "createdAt": "2026-01-01T00:00:00.000Z",
    "updatedAt": "2026-01-01T00:00:00.000Z"
  }
]
```

---

## ğŸ”’ Security Notes

- âš ï¸ **à¸­à¸¢à¹ˆà¸² commit `.env` file** - à¸¡à¸µ credentials à¸ªà¸³à¸„à¸±à¸
- âš ï¸ **à¸­à¸¢à¹ˆà¸² commit `cer/` folder** - à¸¡à¸µ SSL private key
- âœ… à¹ƒà¸Šà¹‰ `.gitignore` à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¹„à¸Ÿà¸¥à¹Œà¸ªà¸³à¸„à¸±à¸
- âœ… à¹ƒà¸Šà¹‰ HTTPS à¸ªà¸³à¸«à¸£à¸±à¸š webhook

---

## ğŸ› ï¸ Tech Stack

- **Runtime:** Node.js 18+
- **Framework:** Express.js
- **LINE SDK:** @line/bot-sdk
- **Wake-on-LAN:** wol
- **Ping:** ping
- **Container:** Docker + Docker Compose

---

## ğŸ¤ Contributing

Pull requests are welcome! For major changes, please open an issue first.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## ğŸ“„ License

This project is licensed under the ISC License.

---

## ï¿½ Related Projects

| Project | Description |
|---------|-------------|
| [copilot_agent_template](https://github.com/pechpijit/copilot_agent_template) | Template à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸£à¹‰à¸²à¸‡ AI Persona à¹ƒà¸Šà¹‰à¸à¸±à¸š GitHub Copilot |

---

## ï¿½ğŸ‘¨â€ğŸ’» Authors

**pechpijit** - [GitHub](https://github.com/pechpijit)

**Sakura (GitHub Copilot)** - AI Assistant à¸—à¸µà¹ˆà¸Šà¹ˆà¸§à¸¢ refactor, à¹€à¸à¸´à¹ˆà¸¡à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ à¹à¸¥à¸°à¹€à¸‚à¸µà¸¢à¸™ documentation ğŸ¤–ğŸ’œ

---

## â­ Support

à¸–à¹‰à¸²à¸Šà¸­à¸šà¹‚à¸›à¸£à¹€à¸ˆà¸„à¸™à¸µà¹‰ à¸à¸” â­ Star à¹ƒà¸«à¹‰à¸«à¸™à¹ˆà¸­à¸¢à¸™à¸°à¸„à¸£à¸±à¸š!

